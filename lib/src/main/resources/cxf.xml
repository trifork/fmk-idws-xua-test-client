<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
	   xmlns:cxf="http://cxf.apache.org/core"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans  http://www.springframework.org/schema/beans/spring-beans.xsd
        http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
        http://cxf.apache.org/transports/http/configuration
        http://cxf.apache.org/schemas/configuration/http-conf.xsd">

	<http-conf:conduit name="*">
		<!-- The production STS does not like chunking (something with the load balancer) -->
		<http-conf:client AllowChunking="false"/>
	</http-conf:conduit>

	<cxf:bus>
		<cxf:features>
			<cxf:logging />
		</cxf:features>
	</cxf:bus>

	<bean id="XUASTSClient" class="com.trifork.idwsxua.fmktestclient.sts.XUASTSClient">
		<constructor-arg ref="cxf" />

		<property name="wsdlLocation" value="classpath:sts.wsdl" />
		<property name="serviceName" value="{http://docs.oasis-open.org/ws-sx/ws-trust/200512/}SecurityTokenService" />
		<property name="endpointName" value="{http://docs.oasis-open.org/ws-sx/ws-trust/200512/}STS_Port" />
		<property name="sendRenewing" value="true" />
		<property name="sendKeyType" value="false" />
		<property name="requiresEntropy" value="false" />
		<property name="tokenType" value="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0" />

		<property name="properties">
			<map>
				<!-- this is used to sign the request to the STS -->
				<!--<entry key="ws-security.signature.username" value="idws xua test wsc (funktionscertifikat)" />-->
				<entry key="ws-security.signature.properties" value="client.properties" />

				<!-- this is used to verify the signature on the response from the STS -->
				<entry key="ws-security.encryption.username" value="sts" />
				<entry key="ws-security.encryption.properties" value="sts.properties" />
				
				<entry key="ws-security.sts.token.properties" value="client.properties"/>
				<entry key="ws-security.asymmetric.signature.algorithm" value="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
			</map>
		</property>
	</bean>
</beans>
